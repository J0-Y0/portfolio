{% load static %}
<aside class="fixed top-0 left-0 h-screen w-[19rem] flex flex-col border-r border-bg-400 dark:border-dark-border bg-bg-200/80 dark:bg-dark-card/30 backdrop-blur-xl px-4 py-4 z-40 overflow-hidden transition-all duration-500 hover:shadow-[0_0_40px_-10px_rgba(255,152,0,0.3)] max-lg:w-[19rem] max-lg:transform max-lg:-translate-x-full max-lg:group-[.sidebar-open]:translate-x-0 max-lg:transition-transform max-lg:duration-300">

  <!-- Profile Section -->
  <div class="relative flex flex-col items-center px-7 pt-3 pb-3 mb-2 border border-bg-400 dark:border-dark-border rounded-3xl bg-gradient-to-br from-bg-100/50 to-bg-300/30 dark:from-dark-card/50 dark:to-gray-800/30 group hover:bg-bg-300/40 dark:hover:bg-gray-800/40 transition-all duration-300">
    <div class="absolute border p-2 -end-2 -top-2 rounded-full bg-bg-100 dark:bg-dark-card border-primary-500/80 dark:border-primary-600/80 shadow-lg shadow-primary-500/20 hover:shadow-primary-500/30 transition-all">
      <img class="h-8" src="../static/img/logo_2.png" alt="Logo">
    </div>
    <div class="flex justify-center">
      <img class="transition ease-in-out duration-500 transform group-hover:scale-105 h-24 sm:h-28 rounded-lg border-2 border-bg-400 dark:border-dark-border group-hover:border-primary-500/30 dark:group-hover:border-primary-600/30" src="../static/img/my_pic.png" alt="Profile Picture">
    </div>
    <h6 class="text-center font-semibold text-lg mt-2 text-text-100 dark:text-white">Yosef Emyayu</h6>
    <p class="text-center text-text-200 dark:text-gray-400 text-sm mb-2">Senior Web Developer</p>
    <div class="flex items-center gap-2 px-4 py-1.5 rounded-full bg-green-900/20 backdrop-blur-sm border border-green-500/30 text-xs text-green-600 dark:text-green-400 transition-all duration-300 group-hover:bg-green-900/40 group-hover:border-green-500/50">
      <span class="h-2 w-2 rounded-full bg-green-500 animate-pulse"></span>
      Available for work
    </div>
  </div>

  <!-- Skills Section -->
  <div class="flex-1 flex flex-col custom-scrollbar">
    <div class="flex items-center mb-2 pl-2">
      <svg class="w-6 h-6 text-primary-500 dark:text-primary-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
      </svg>
      <h2 class="text-lg font-medium text-transparent bg-clip-text bg-gradient-to-r from-primary-500 to-secondary-500 dark:from-primary-600 dark:to-secondary-600">Technical Skills</h2>
    </div>

    <div class="relative flex-1 border border-bg-400 dark:border-dark-border rounded-3xl bg-bg-100/50 dark:bg-dark-card/30 backdrop-blur-sm p-1 transition-all duration-300 hover:bg-bg-300/40 dark:hover:bg-gray-800/40">
      <div class="relative z-10 mb-4">
        <div class="flex gap-1 p-1 rounded-3xl bg-bg-300/50 dark:bg-gray-800/50 backdrop-blur-sm border border-bg-400 dark:border-dark-border">
          {% for tag in tags %}
          <button class="skill-tab flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all duration-300 hover:bg-bg-400/60 dark:hover:bg-gray-700/60" data-tab="{{tag.name|slugify}}">
            <span class="tab-short">{{tag.name|slice:":1"}}</span>
            <span class="tab-full">{{tag.name}}</span>
          </button>
          {% endfor %}
        </div>
      </div>

      <div class="relative h-[16rem] overflow-y-auto p-2">
        {% for tag in tags %}
        <div class="skill-panel flex absolute inset-0 flex-wrap content-start gap-2 opacity-0 invisible transition-all duration-500 transform translate-y-2 w-full" data-panel="{{tag.name|slugify}}">
          {% for skill in tag.skills.all %}
          <div class="skill-card relative max-w-28 group flex-none" data-skill="{{skill.name|slugify}}">
            <div class="random-bg flex items-center gap-2 px-2   py-2 rounded-lg border border-white/10 hover:border-primary-500/30 dark:hover:border-primary-600/30 transition-all duration-300 hover:-translate-y-0.5 min-w-[120px] backdrop-blur-sm">
              <img src="{{skill.logo.url}}" alt="{{skill.name}} logo" class="w-5 h-5 object-contain">
              <span class="text-xs font-medium text-text-100/90 dark:text-white/90">{{skill.name}}</span>
            </div>
          </div>
          {% endfor %}
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Contact Button -->
  <div class="mt-4 mb-2">
    <a href="#contact" class="rounded-full bg-primary-500/10 dark:bg-primary-600/10 group relative flex items-center justify-center gap-2 w-full py-3 px-4 overflow-hidden border-2 border-primary-500/80 hover:border-primary-500 hover:bg-primary-500/90 dark:hover:border-primary-600 dark:hover:bg-primary-600/90 transition-all duration-500 shadow-lg hover:shadow-xl hover:shadow-primary-500/30 dark:hover:shadow-primary-600/30">
      <span class="text tracking-wide font-semibold text-primary-500 dark:text-primary-600 group-hover:text-text-100 dark:group-hover:text-white transition-colors duration-500 z-10">reach me</span>
      <svg class="share-icon w-5 h-5 text-primary-500 dark:text-primary-600 group-hover:text-text-100 dark:group-hover:text-white transition-all duration-500 group-hover:rotate-45 z-10" fill="currentColor" viewBox="0 0 24 24">
        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6m4-3h6v6m-11 5L21 3"></path>
      </svg>
      <span class="absolute inset-0 bg-gradient-to-r from-primary-500/10 to-secondary-500/10 dark:from-primary-600/10 dark:to-secondary-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-10"></span>
      <span class="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 group-active:opacity-20 transition-opacity duration-300 dark:bg-dark-text"></span>
    </a>
  </div>
</aside>

<style>
  .random-bg {
    background-color: rgba(255, 255, 255, 0.05);
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  
  .random-bg::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--random-bg);
    opacity: 0.3;
    z-index: -1;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .random-bg:hover::before {
    opacity: 0.5;
  }

  .skill-tab {
    position: relative;
    overflow: hidden;
    color: var(--text-200);
    min-width: 2.5rem;
    background: transparent;
    border: none;
  }
  
  .skill-tab::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--primary-500), var(--secondary-500));
    transition: width 0.3s ease;
  }
  
  .skill-tab:hover::before {
    width: 60%;
  }
  
  .skill-tab .tab-full {
    display: none;
  }
  
  .skill-tab.active {

    background: rgb(57 150 83 / 40%);
    min-width: fit-content;
  }
  .skill-tab:hover {
    min-width: fit-content;
  }
  
  .skill-tab.active::before {
    width: 100%;
  }
  
  .skill-tab.active .tab-short {
    display: none;
  }
  
  .skill-tab.active .tab-full {
    display: inline;
  }
  
  .skill-tab:hover:not(.active) .tab-short {
    display: none;
  }
  
  .skill-tab:hover:not(.active) .tab-full {
    display: inline;
  }

  .skill-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .skill-card:hover {
    transform: translateY(-2px);
    filter: drop-shadow(0 4px 6px rgba(255, 152, 0, 0.2));
  }

  .skill-panel {
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: opacity 0.4s ease, transform 0.4s ease, visibility 0.4s;
  }
  
  .skill-panel.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }
  
  .button-content:hover {
    transform: translateY(-2px);
  }
  
  .backdrop-blur-xl {
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
      // Tab functionality
      const tabs = document.querySelectorAll('.skill-tab');
      const panels = document.querySelectorAll('.skill-panel');
      
      if (tabs.length > 0) {
        activateTab(tabs[0]);
      }
      
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          activateTab(this);
        });
        
        tab.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            activateTab(this);
          }
        });
      });
      
      function activateTab(activeTab) {
        tabs.forEach(tab => {
          tab.classList.remove('active');
          tab.setAttribute('aria-selected', 'false');
        });
        
        panels.forEach(panel => panel.classList.remove('active'));
        
        activeTab.classList.add('active');
        activeTab.setAttribute('aria-selected', 'true');
        const panelId = activeTab.getAttribute('data-tab');
        document.querySelector(`[data-panel="${panelId}"]`).classList.add('active');
      }

      // Random background colors using the new theme
      const colorPalette = [
        'linear-gradient(135deg, rgba(255, 152, 0, 0.3), rgba(255, 179, 71, 0.3))', // Primary orange shades
        'linear-gradient(135deg, rgba(0, 188, 212, 0.3), rgba(0, 172, 193, 0.3))', // Secondary teal shades
        'linear-gradient(135deg, rgba(255, 152, 0, 0.3), rgba(245, 124, 0, 0.3))', // Primary orange shades
        'linear-gradient(135deg, rgba(0, 150, 136, 0.3), rgba(0, 96, 100, 0.3))',  // Secondary teal shades
        'linear-gradient(135deg, rgba(255, 179, 71, 0.3), rgba(255, 152, 0, 0.3))', // Primary orange shades
        'linear-gradient(135deg, rgba(0, 172, 193, 0.3), rgba(0, 131, 143, 0.3))',  // Secondary teal shades
        'linear-gradient(135deg, rgba(245, 124, 0, 0.3), rgba(230, 81, 0, 0.3))',   // Primary orange shades
        'linear-gradient(135deg, rgba(0, 131, 143, 0.3), rgba(0, 96, 100, 0.3))'    // Secondary teal shades
      ];

      document.querySelectorAll('.random-bg').forEach((el, index) => {
        const colorIndex = index % colorPalette.length;
        el.style.setProperty('--random-bg', colorPalette[colorIndex]);
      });
    });
</script>