{% extends 'base.html' %}

{% block content %}
  <div id="landing" class="fixed inset-0 h-screen w-full pt-1 sm:pt-32 px-6 sm:px-10 text-center bg-gradient-to-br from-bg_dark to-[#0a0636b8] text-quinary overflow-hidden">
    <!-- Animated Background Elements -->
    <div class="absolute inset-0 overflow-hidden z-0 pointer-events-none">
      {% for i in xxxxxxxxxx %}
        <div class="floating-particle absolute w-2 h-2 bg-secondary rounded-full opacity-20" style="top: {{ forloop.counter|add:5 }}%; left: {{ forloop.counter|add:10 }}%; 
                    animation: float-particle {{ 10|add:forloop.counter }}s ease-in-out infinite;"></div>
      {% endfor %}

      <!-- Animated gradient circles -->
      <div class="absolute -bottom-1/4 -left-1/4 w-[150%] h-[150%] rounded-full bg-gradient-to-tr from-warning/5 to-secondary/5 animate-spin-slow opacity-30"></div>
      <div class="absolute -top-1/4 -right-1/4 w-[120%] h-[120%] rounded-full bg-gradient-to-br from-warning/3 to-secondary/3 animate-spin-slower opacity-20"></div>
    </div>

    <!-- Hero Section -->
    <div id="hero-text" class="relative z-10 mb-16">
      <h1 data-aos="fade-up" data-aos-duration="1500" class="text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-extrabold tracking-tight leading-tight text-text_light">
        <span class="bg-clip-text text-transparent bg-gradient-to-r from-warning to-secondary animate-gradient-x">{{ profile.first_name }}</span>
        <span class="bg-clip-text text-transparent bg-gradient-to-r from-secondary to-warning animate-gradient-x-reverse">{{ profile.last_name }}</span>
      </h1>

      <h2 data-aos="zoom-in" data-aos-duration="2000" data-aos-delay="300" class="text-xl sm:text-2xl md:text-3xl font-semibold text-quinary mt-4 max-w-3xl mx-auto animate-pulse-slow"><span class="border-s-8 border-red-600 ps-4">{{ profile.heading }}</span></h2>
    </div>

    <!-- Interactive Skills Section -->
    <div id="skills-container" class="absolute inset-0 h-full w-full my-16 overflow-hidden">
      {% for skill in skills %}
        <div class="floating-skill absolute cursor-grab active:cursor-grabbing z-20 transition-opacity duration-300" data-skill-id="{{ forloop.counter }}" data-aos="zoom-in" data-aos-delay="{{ forloop.counter }}00">
          <div class="relative group transform transition-all duration-500 hover:scale-125">
            <div class="w-10 h-10 sm:w-16 sm:h-16 flex items-center justify-center p-3 rounded-full shadow-lg bg-white/5 backdrop-blur-lg border-2 border-secondary/30 group-hover:border-warning transition-all animate-float">
              <img src="{{ skill.logo.url }}" alt="{{ skill.name }}" class="w-full h-full object-contain" />
            </div>
            <span class="skill-name absolute -bottom-8 left-1/2 -translate-x-1/2 text-sm font-medium text-quinary opacity-0 group-hover:opacity-100 transition-opacity duration-300">{{ skill.name }}</span>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Quote Section -->
    <div id="quote-section" class="absolute bottom-10 left-0 right-0 z-10 max-w-4xl mx-auto px-6" data-aos="fade-up" data-aos-delay="500">
      <div class="relative group">
        <!-- Glow effect -->
        <div class="absolute inset-0 bg-gradient-to-br from-blue-600/10 to-blue-400/10 rounded-2xl opacity-0 group-hover:opacity-100 blur-xl transition-opacity duration-700"></div>

        <!-- Main card -->
        <div class="relative bg-white/5 backdrop-blur-lg border border-blue-500/20 rounded-2xl p-6 sm:p-8 shadow-xl overflow-hidden transform transition-all duration-500 group-hover:scale-[1.02]">
          <!-- Animated decorative elements -->
          <div class="absolute -top-10 -left-10 w-32 h-32 bg-warning/10 rounded-full filter blur-xl opacity-0 group-hover:opacity-70 transition-opacity duration-1000 animate-pulse"></div>
          <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-secondary/10 rounded-full filter blur-xl opacity-0 group-hover:opacity-70 transition-opacity duration-1000 delay-200 animate-pulse"></div>

          <div class="relative z-10 text-center">
            <i class="fas fa-quote-left text-3xl text-warning opacity-30 mb-4 transform transition-all duration-700 group-hover:rotate-12 group-hover:scale-110 group-hover:opacity-70"></i>

            <blockquote class="text-lg sm:text-xl md:text-2xl font-medium italic text-text_light leading-relaxed mb-4 bg-clip-text text-transparent bg-gradient-to-r from-text_light to-text_light group-hover:from-warning group-hover:to-secondary transition-all duration-500">"Learn the rules like a pro, so you can break them like an artist."</blockquote>

            <div class="text-md text-quinary mb-4 transform transition-all duration-500 group-hover:translate-y-1 group-hover:text-secondary">â€” Pablo Picasso</div>

            <div class="border-t border-secondary/20 pt-4">
              <div class="bg-white/5 backdrop-blur-xs border border-secondary/10 rounded-xl p-6 shadow-lg" data-aos="fade-up" data-aos-delay="500">
                <p class="text-gray-500 text-sm mb-6">When I'm not coding, you can find me exploring new technologies, reading books, or mentoring.</p>
                <div class="flex flex-wrap justify-center gap-4 text-xs">
                  <span class="bg-warning/10 text-warning px-3 py-2 rounded-full flex items-center"><i class="fas fa-check-circle mr-2"></i> Available for freelance</span>
                  <span class="bg-secondary/10 text-secondary px-3 py-2 rounded-full flex items-center"><i class="fas fa-handshake mr-2"></i> Open to collaborations</span>
                  <span class="bg-white/10 text-quinary px-3 py-2 rounded-full flex items-center"><i class="fas fa-times-circle mr-2"></i> Not available for full-time</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- CTA Button -->
    <div class="mb-4 absolute transform bottom-6 right-3 transition-all duration-500 group-hover:-translate-y-2">
      <a href="/about" class="cta-button inline-block px-6 py-3 bg-gradient-to-r from-primary to-info rounded-full text-gray-900 font-bold hover:shadow-xl hover:shadow-blue-600/30 transition-all duration-300 group relative overflow-hidden">
        <span class="relative z-10 flex items-center">
          <span>---</span>
          <div class="ml-3 arrow-container">
            <i class="fas fa-arrow-right text-lg transform transition-transform duration-300 group-hover:translate-x-1"></i>
          </div>
        </span>
        <span class="absolute inset-0 bg-gradient-to-r from-danger to-warning opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
      </a>
    </div>
    <style>
      /* Layout */
      #landing {
        display: grid;
        grid-template-rows: auto 1fr auto;
        align-content: space-between;
      }
      
      /* Text sections that should trigger opacity change */
      #hero-text,
      #quote-section {
        position: relative;
        z-index: 15;
      }
      
      /* Skill icon when overlapping text */
      .floating-skill.overlapping-text {
        opacity: 0.5 !important;
      }
      .floating-skill.overlapping-text:hover {
        opacity: 0.7 !important;
      }
      
      /* Animations */
      @keyframes float-particle {
        0%,
        100% {
          transform: translate(0, 0);
          opacity: 0.2;
        }
        25% {
          transform: translate(20px, -30px);
          opacity: 0.4;
        }
        50% {
          transform: translate(40px, 0);
          opacity: 0.2;
        }
        75% {
          transform: translate(20px, 30px);
          opacity: 0.4;
        }
      }
      
      @keyframes spin-slow {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      
      @keyframes gradient-x {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }
      
      @keyframes gradient-x-reverse {
        0% {
          background-position: 100% 50%;
        }
        50% {
          background-position: 0% 50%;
        }
        100% {
          background-position: 100% 50%;
        }
      }
      
      @keyframes pulse-slow {
        0%,
        100% {
          opacity: 0.9;
        }
        50% {
          opacity: 1;
        }
      }
      
      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      
      /* Utility classes */
      .animate-spin-slow {
        animation: spin-slow 40s linear infinite;
      }
      
      .animate-spin-slower {
        animation: spin-slow 60s linear infinite;
      }
      
      .animate-gradient-x {
        background-size: 200% 200%;
        animation: gradient-x 8s ease infinite;
      }
      
      .animate-gradient-x-reverse {
        background-size: 200% 200%;
        animation: gradient-x-reverse 8s ease infinite;
      }
      
      .animate-pulse-slow {
        animation: pulse-slow 4s ease-in-out infinite;
      }
      
      .animate-float {
        animation: float 6s ease-in-out infinite;
      }
      
      /* Interactive elements */
      .floating-skill:hover .skill-name {
        animation: float 3s ease-in-out infinite;
      }
      
      .cta-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px -5px rgba(255, 193, 7, 0.4);
      }
    </style>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Initialize AOS animations
        AOS.init({
          duration: 800,
          easing: 'ease-out-quart',
          once: false,
          offset: 100
        })
      
        // Physics parameters
        const physics = {
          friction: 0.96,
          bounce: 0.85,
          pushForce: 0.3
        }
      
        // Text sections to check for overlap
        const textSections = [document.getElementById('hero-text'), document.getElementById('quote-section')]
      
        // Skill objects storage
        const skills = {}
        const skillElements = document.querySelectorAll('.floating-skill')
        const container = document.getElementById('skills-container')
        let containerRect = container.getBoundingClientRect()
      
        // Initialize skills with random positions and velocities
        skillElements.forEach((skill, index) => {
          const id = skill.dataset.skillId
          const size = skill.getBoundingClientRect()
      
          skills[id] = {
            element: skill,
            x: Math.random() * (containerRect.width - size.width),
            y: Math.random() * (containerRect.height - size.height),
            vx: (Math.random() - 0.5) * 3,
            vy: (Math.random() - 0.5) * 3,
            width: size.width,
            height: size.height,
            isDragging: false
          }
      
          // Set initial position
          skill.style.left = `${skills[id].x}px`
          skill.style.top = `${skills[id].y}px`
        })
      
        // Mouse interaction variables
        let mouseX = 0
        let mouseY = 0
        let mouseRadius = 200 // Area of influence
        let isInteracting = false
      
        // Track mouse position
        container.addEventListener('mousemove', (e) => {
          const rect = container.getBoundingClientRect()
          mouseX = e.clientX - rect.left
          mouseY = e.clientY - rect.top
          isInteracting = true
        })
      
        container.addEventListener('mouseleave', () => {
          isInteracting = false
        })
      
        // Touch support
        container.addEventListener(
          'touchmove',
          (e) => {
            e.preventDefault()
            const touch = e.touches[0]
            const rect = container.getBoundingClientRect()
            mouseX = touch.clientX - rect.left
            mouseY = touch.clientY - rect.top
            isInteracting = true
          },
          { passive: false }
        )
      
        container.addEventListener('touchend', () => {
          isInteracting = false
        })
      
        // Drag functionality
        skillElements.forEach((skill) => {
          let isDragging = false
          let offsetX, offsetY
      
          skill.addEventListener('mousedown', (e) => {
            isDragging = true
            const id = skill.dataset.skillId
            skills[id].isDragging = true
      
            const rect = skill.getBoundingClientRect()
            offsetX = e.clientX - rect.left
            offsetY = e.clientY - rect.top
            skill.style.cursor = 'grabbing'
          })
      
          document.addEventListener('mousemove', (e) => {
            if (!isDragging) return
      
            const id = document.querySelector('.floating-skill:hover')?.dataset.skillId
            if (!id) return
      
            const skill = skills[id]
            skill.x = e.clientX - containerRect.left - offsetX
            skill.y = e.clientY - containerRect.top - offsetY
      
            // Apply position
            skill.element.style.left = `${skill.x}px`
            skill.element.style.top = `${skill.y}px`
          })
      
          document.addEventListener('mouseup', () => {
            if (isDragging) {
              const id = document.querySelector('.floating-skill:hover')?.dataset.skillId
              if (id) {
                skills[id].isDragging = false
                // Give it a push when released
                skills[id].vx = (Math.random() - 0.5) * 8
                skills[id].vy = (Math.random() - 0.5) * 8
              }
              isDragging = false
              document.querySelectorAll('.floating-skill').forEach((s) => {
                s.style.cursor = 'grab'
              })
            }
          })
        })
      
        // Check if element overlaps with any text section
        function checkTextOverlap(skill) {
          const skillRect = skill.element.getBoundingClientRect()
      
          for (const textSection of textSections) {
            if (!textSection) continue
      
            const textRect = textSection.getBoundingClientRect()
      
            // Check for overlap
            if (!(skillRect.right < textRect.left || skillRect.left > textRect.right || skillRect.bottom < textRect.top || skillRect.top > textRect.bottom)) {
              return true
            }
          }
          return false
        }
      
        // Animation loop
        function animate() {
          const containerWidth = containerRect.width
          const containerHeight = containerRect.height
      
          Object.values(skills).forEach((skill) => {
            if (skill.isDragging) return
      
            // Apply velocity
            skill.x += skill.vx
            skill.y += skill.vy
      
            // Mouse push effect
            if (isInteracting) {
              const dx = mouseX - (skill.x + skill.width / 2)
              const dy = mouseY - (skill.y + skill.height / 2)
              const distance = Math.sqrt(dx * dx + dy * dy)
      
              if (distance < mouseRadius && distance > 0) {
                const force = ((mouseRadius - distance) / mouseRadius) * physics.pushForce
                skill.vx -= (dx / distance) * force
                skill.vy -= (dy / distance) * force
              }
            }
      
            // Boundary collision
            if (skill.x < 0) {
              skill.x = 0
              skill.vx = -skill.vx * physics.bounce
            } else if (skill.x + skill.width > containerWidth) {
              skill.x = containerWidth - skill.width
              skill.vx = -skill.vx * physics.bounce
            }
      
            if (skill.y < 0) {
              skill.y = 0
              skill.vy = -skill.vy * physics.bounce
            } else if (skill.y + skill.height > containerHeight) {
              skill.y = containerHeight - skill.height
              skill.vy = -skill.vy * physics.bounce
            }
      
            // Apply friction
            skill.vx *= physics.friction
            skill.vy *= physics.friction
      
            // Update position
            skill.element.style.left = `${skill.x}px`
            skill.element.style.top = `${skill.y}px`
      
            // Check for text overlap and adjust opacity
            if (checkTextOverlap(skill)) {
              skill.element.classList.add('overlapping-text')
            } else {
              skill.element.classList.remove('overlapping-text')
            }
          })
      
          requestAnimationFrame(animate)
        }
      
        // Start animation
        animate()
      
        // Handle window resize
        window.addEventListener('resize', () => {
          containerRect = container.getBoundingClientRect()
        })
      })
    </script>
  </div>
{% endblock %}
